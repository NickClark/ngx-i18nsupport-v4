{"version":3,"file":"writer-to-string.js","sourceRoot":"","sources":["../../../../projects/xliffmerge/src/common/writer-to-string.ts"],"names":[],"mappings":";;AAAA,mCAAgC;AAChC,iCAAgC;AAChC;;;;;GAKG;AAEH,MAAa,cAAe,SAAQ,iBAAQ;IAIxC;QACI,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IAC3B,CAAC;IAEM,MAAM,CAAC,KAAU,EAAE,QAAgB,EAAE,QAAkB;QAC1D,IAAI,WAAW,CAAC;QAChB,IAAI,eAAQ,CAAC,KAAK,CAAC,EAAE;YACjB,WAAW,GAAG,KAAK,CAAC;SACvB;aAAM,IAAI,KAAK,YAAY,MAAM,EAAE;YAChC,WAAW,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;SAClC;aAAM;YACH,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;SACxD;QACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QACpD,QAAQ,EAAE,CAAC;IACf,CAAC;IAED;;;OAGG;IACI,WAAW;QACd,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;CACJ;AA7BD,wCA6BC","sourcesContent":["import {Writable} from 'stream';\nimport {isString} from './util';\n/**\n * Created by martin on 20.02.2017.\n * A helper class for testing.\n * Can be used as a WritableStream and writes everything (synchronously) into a string,\n * that can easily be read by the tests.\n */\n\nexport class WriterToString extends Writable {\n\n    private resultString: string;\n\n    constructor() {\n        super();\n        this.resultString = '';\n    }\n\n    public _write(chunk: any, encoding: string, callback: Function): void {\n        let chunkString;\n        if (isString(chunk)) {\n            chunkString = chunk;\n        } else if (chunk instanceof Buffer) {\n            chunkString = chunk.toString();\n        } else {\n            chunkString = Buffer.alloc(chunk).toString(encoding);\n        }\n        this.resultString = this.resultString + chunkString;\n        callback();\n    }\n\n    /**\n     * Returns a string of everything, that was written to the stream so far.\n     * @return written data\n     */\n    public writtenData(): string {\n        return this.resultString;\n    }\n}\n"]}
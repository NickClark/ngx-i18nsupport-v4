{"version":3,"file":"file-util.js","sourceRoot":"","sources":["../../../../projects/xliffmerge/src/common/file-util.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fs from 'fs';\n\n/**\n * Created by martin on 17.02.2017.\n * Some (a few) simple utils for file operations.\n * Just for convenience.\n */\n\nexport class FileUtil {\n\n    /**\n     * Check for existence.\n     * @param filename filename\n     * @return wether file exists\n     */\n    public static exists(filename: string) {\n        return fs.existsSync(filename);\n    }\n\n    /**\n     * Read a file.\n     * @param filename filename\n     * @param encoding encoding\n     * @return content of file\n     */\n    public static read(filename: string, encoding: string) {\n        return fs.readFileSync(filename, encoding);\n    }\n\n    /**\n     * Write a file with given content.\n     * @param filename filename\n     * @param newContent newContent\n     * @param encoding encoding\n     */\n    public static replaceContent(filename: string, newContent: string, encoding: string) {\n        fs.writeFileSync(filename, newContent, {encoding: encoding});\n    }\n\n    public static copy(srcFile: string, destFile: string) {\n        const BUF_LENGTH = 64 * 1024;\n        const buff = Buffer.alloc(BUF_LENGTH);\n        const fdr = fs.openSync(srcFile, 'r');\n        const fdw = fs.openSync(destFile, 'w');\n        let bytesRead = 1;\n        let pos = 0;\n        while (bytesRead > 0) {\n            bytesRead = fs.readSync(fdr, buff, 0, BUF_LENGTH, pos);\n            fs.writeSync(fdw, buff, 0, bytesRead);\n            pos += bytesRead;\n        }\n        fs.closeSync(fdr);\n        fs.closeSync(fdw);\n    }\n\n    /**\n     * Delete the folder and all of its content (rm -rf).\n     * @param path path\n     */\n    public static deleteFolderRecursive(path: string) {\n        let files = [];\n        if (fs.existsSync(path) ) {\n            files = fs.readdirSync(path);\n            files.forEach(function(file) {\n                const curPath = path + '/' + file;\n                if (fs.lstatSync(curPath).isDirectory()) { // recurse\n                    FileUtil.deleteFolderRecursive(curPath);\n                } else { // delete file\n                    fs.unlinkSync(curPath);\n                }\n            });\n            fs.rmdirSync(path);\n        }\n    }\n\n    /**\n     * Delete folders content recursively, but do not delete folder.\n     * Folder is left empty at the end.\n     * @param path path\n     */\n    public static deleteFolderContentRecursive(path: string) {\n        let files = [];\n        if (fs.existsSync(path) ) {\n            files = fs.readdirSync(path);\n            files.forEach(function(file) {\n                const curPath = path + '/' + file;\n                if (fs.lstatSync(curPath).isDirectory()) { // recurse\n                    FileUtil.deleteFolderRecursive(curPath);\n                } else { // delete file\n                    fs.unlinkSync(curPath);\n                }\n            });\n        }\n    }\n\n    /**\n     * Delete a file.\n     * @param path path\n     */\n    public static deleteFile(path: string) {\n        fs.unlinkSync(path);\n    }\n}\n"]}